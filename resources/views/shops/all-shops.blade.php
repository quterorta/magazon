@extends('layouts/layouts')

@section('title', 'Toți vânzătorii')

@section('main-content-block')

<div class="shops_page">

    <h1 class="shops_page__header">Toți vânzătorii</h1>

    <div class="shops_page__filter_block">
        <div class="dropdown">
            <button class="catalog_products__buttons__sort_btn" type="button" id="sortButton" data-bs-toggle="dropdown" aria-expanded="false" title="Sortarea vânzătorilor">
                <i class="fas fa-sort-amount-down"></i>
            </button>

            <div class="dropdown-menu catalog_products__buttons__sort_btn__dropdown_menu" aria-labelledby="sortButton">
                <form action="" method="GET">
                    <!-- По рейтингу (по убыванию) -->
                    <input type="submit" class="catalog_products__dropdown_menu__sort_button @if (null !== Request::input('sort') and Request::input('sort') == 'Prin evaluare (descrescătoare)') active @endif" name="sort" value="Prin evaluare (descrescătoare)">
                </form>
                <form action="" method="GET">
                    <!-- По рейтингу (по возрастанию) -->
                    <input type="submit" class="catalog_products__dropdown_menu__sort_button @if (null !== Request::input('sort') and Request::input('sort') == 'Prin evaluare (crescătoare)') active @endif" name="sort" value="Prin evaluare (crescătoare)">
                </form>
                <form action="" method="GET">
                    <!-- Популярные -->
                    <input type="submit" class="catalog_products__dropdown_menu__sort_button @if (null !== Request::input('sort') and Request::input('sort') == 'Mai popular mai întâi') active @endif" name="sort" value="Mai popular mai întâi">
                </form>
                <form action="" method="GET">
                    <!-- Непопулярные -->
                    <input type="submit" class="catalog_products__dropdown_menu__sort_button @if (null !== Request::input('sort') and Request::input('sort') == 'Mai puțin popular mai întâi') active @endif" name="sort" value="Mai puțin popular mai întâi">
                </form>
                <form action="" method="GET">
                    <!-- А-Я -->
                    <input type="submit" class="catalog_products__dropdown_menu__sort_button @if (null !== Request::input('sort') and Request::input('sort') == 'Alfabetic (A-Z)') active @endif" name="sort" value="Alfabetic (A-Z)">
                </form>
                <form action="" method="GET">
                    <!-- Я-А -->
                    <input type="submit" class="catalog_products__dropdown_menu__sort_button @if (null !== Request::input('sort') and Request::input('sort') == 'Alfabetic (Z-A)') active @endif" name="sort" value="Alfabetic (Z-A)">
                </form>
                <form action="" method="GET">
                    <!-- Сначала официальные магазины -->
                    <input type="submit" class="catalog_products__dropdown_menu__sort_button @if (null !== Request::input('sort') and Request::input('sort') == 'Vânzătorii oficiali mai întâi') active @endif" name="sort" value="Vânzătorii oficiali mai întâi">
                </form>
            </div>
        </div>
    </div>

    <div class="shops_page__grid_block">

        @foreach ($shops as $shop)
            <div class="shops_page__grid_item">
                <div class="shops_page__grid_item__image_block">
                    @if ($shop->official_saller == 1)
                    <div class="shops_page__grid_item__official_badge" title="Vânzător oficial">
                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 172 172" style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g><path d="M147.92,86c0,-9.11772 -5.50228,-16.85772 -13.24228,-20.46456c0.68456,-2.23772 1.20228,-4.65088 1.20228,-7.05544c0,-12.38228 -9.97772,-22.36 -22.36,-22.36c-2.58,0 -4.81772,0.34228 -7.05544,1.20228c-3.44,-7.74 -11.34684,-13.24228 -20.46456,-13.24228c-9.11772,0 -16.85772,5.50228 -20.46456,13.24228c-2.23772,-0.86 -4.47544,-1.20228 -7.05544,-1.20228c-12.38228,0 -22.36,9.97772 -22.36,22.36c0,2.58 0.34228,4.81772 1.20228,7.05544c-7.74,3.44 -13.24228,11.34684 -13.24228,20.46456c0,9.11772 5.50228,16.85772 13.24228,20.46456c-0.86,2.23772 -1.20228,4.47544 -1.20228,7.05544c0,12.38228 9.97772,22.36 22.36,22.36c2.58,0 4.81772,-0.34228 7.05544,-1.20228c3.44,7.74 11.34684,13.24228 20.46456,13.24228c9.11772,0 16.85772,-5.50228 20.46456,-13.24228c2.23772,0.68456 4.65088,1.20228 7.05544,1.20228c12.38228,0 22.36,-9.97772 22.36,-22.36c0,-2.58 -0.34228,-4.81772 -1.20228,-7.05544c7.74,-3.60684 13.24228,-11.34684 13.24228,-20.46456z" fill="#f19b38"></path><path d="M86,142.76c-6.84904,0 -13.03244,-3.9818 -15.75004,-10.14628c-0.85656,-1.84556 -2.75372,-3.096 -4.71624,-3.096c-0.47816,0 -0.85656,0.09976 -1.37944,0.23736l-0.30272,0.07912c-1.9694,0.59168 -3.73756,0.8858 -5.37156,0.8858c-9.48408,0 -17.2,-7.71592 -17.2,-17.2c0,-1.63228 0.2924,-3.40388 0.89612,-5.40768c0.87548,-2.47336 -0.38184,-5.30964 -2.7864,-6.36228c-6.17308,-2.8982 -10.14972,-9.07644 -10.14972,-15.75004c0,-4.3688 1.67184,-8.5484 4.70936,-11.76996c0.32508,-0.34572 0.87032,-0.3612 1.21604,-0.03612c0.34572,0.32508 0.3612,0.87032 0.03612,1.21604c-2.73652,2.90164 -4.24152,6.66156 -4.24152,10.59004c0,6.00968 3.58792,11.5756 9.14008,14.18484c3.19232,1.39664 4.8676,5.19612 3.71004,8.4624c-0.54008,1.80256 -0.81012,3.40904 -0.81012,4.87276c0,8.53636 6.94536,15.48 15.48,15.48c1.46372,0 3.0702,-0.26832 4.91232,-0.82388l0.32508,-0.086c0.57448,-0.15136 1.11628,-0.29412 1.81804,-0.29412c2.61784,0 5.1428,1.64948 6.28316,4.10736c2.44928,5.5556 8.01348,9.13664 14.1814,9.13664c6.10256,0 11.53604,-3.50192 14.18484,-9.14008c1.39492,-3.19232 5.19612,-4.86932 8.4624,-3.71004c1.80256,0.5418 3.40904,0.81012 4.87276,0.81012c8.53636,0 15.48,-6.94364 15.48,-15.48c0,-1.46372 -0.26832,-3.0702 -0.82388,-4.91232c-1.18852,-3.35572 0.45752,-7.07952 3.76164,-8.43832c5.5212,-2.43724 9.10224,-8.00144 9.10224,-14.16936c0,-0.47472 0.38528,-0.86 0.86,-0.86c0.47472,0 0.86,0.38528 0.86,0.86c0,6.84904 -3.9818,13.03072 -10.14628,15.74832c-2.47508,1.01996 -3.698,3.79432 -2.80188,6.32444c0.61404,2.04336 0.90816,3.81496 0.90816,5.44724c0,9.48408 -7.71592,17.2 -17.2,17.2c-1.63228,0 -3.40388,-0.29412 -5.40768,-0.89612c-2.47508,-0.87204 -5.31136,0.38356 -6.36228,2.7864c-2.94292,6.26768 -8.97496,10.14972 -15.75004,10.14972zM39.56,72.06456c-0.47472,0 -0.86,-0.38528 -0.86,-0.86c0,-0.49708 0.33712,-0.89956 0.7998,-1.00276c2.39424,-1.0406 3.57416,-3.77712 2.68836,-6.27456c-0.61576,-2.04508 -0.90816,-3.81324 -0.90816,-5.44724c0,-9.48408 7.71592,-17.2 17.2,-17.2c1.634,0 3.40216,0.2924 5.40768,0.89612c2.46992,0.87376 5.30792,-0.38012 6.36228,-2.7864c2.94292,-6.2694 8.97496,-10.14972 15.75004,-10.14972c6.84904,0 13.03072,3.98352 15.74832,10.148c0.19264,0.43344 -0.00516,0.94256 -0.4386,1.13348c-0.44032,0.18748 -0.94256,-0.00688 -1.13348,-0.44032c-2.44412,-5.54012 -8.00832,-9.12116 -14.17624,-9.12116c-6.10084,0 -11.53776,3.50192 -14.18484,9.14008c-1.39836,3.19232 -5.19956,4.86244 -8.4624,3.71004c-1.80256,-0.54008 -3.40904,-0.81012 -4.87276,-0.81012c-8.53464,0 -15.48,6.94536 -15.48,15.48c0,1.46372 0.27004,3.0702 0.82388,4.91232c1.17132,3.30584 -0.40936,6.96944 -3.61544,8.37812c-0.15824,0.1806 -0.39044,0.29412 -0.64844,0.29412zM132.26456,71.89772c-0.11524,0 -0.2322,-0.02236 -0.344,-0.07224c-3.21296,-1.40524 -4.88824,-5.20644 -3.7324,-8.47272c0.54352,-1.80256 0.81184,-3.40904 0.81184,-4.87276c0,-5.76716 -3.12008,-11.01144 -8.1442,-13.68604c-0.41796,-0.2236 -0.57792,-0.74476 -0.35432,-1.16272c0.22532,-0.4214 0.74648,-0.57448 1.16444,-0.35604c5.58312,2.9756 9.05408,8.80124 9.05408,15.2048c0,1.634 -0.29412,3.40216 -0.89612,5.40768c-0.87376,2.47336 0.38184,5.30964 2.7864,6.36228c0.43516,0.19092 0.63296,0.6966 0.44376,1.13348c-0.14276,0.32164 -0.45752,0.51428 -0.78948,0.51428zM108.36,43.86c-0.34056,0 -0.66564,-0.20468 -0.7998,-0.5418c-0.17544,-0.44032 0.03956,-0.94084 0.47988,-1.11628c0.96836,-0.38528 1.94704,-0.5762 2.7348,-0.731c0.45924,-0.08944 0.91848,0.21156 1.00964,0.6794c0.09116,0.46612 -0.21328,0.91848 -0.68112,1.00792c-0.90988,0.17888 -1.6684,0.33884 -2.4252,0.63984c-0.10492,0.043 -0.21156,0.06192 -0.3182,0.06192zM117.82,43.51772c-0.08944,0 -0.1806,-0.01376 -0.27004,-0.043c-0.93568,-0.31132 -2.03304,-0.47472 -3.16996,-0.47472c-0.47472,0 -0.86,-0.38528 -0.86,-0.86c0,-0.47472 0.38528,-0.86 0.86,-0.86c1.31924,0 2.60236,0.19436 3.71004,0.56072c0.45064,0.14964 0.69488,0.6364 0.54524,1.08704c-0.11868,0.3612 -0.45408,0.58996 -0.81528,0.58996z" fill="#1d257a"></path><path d="M86,149.64c-9.00592,0 -17.22236,-4.99488 -21.35208,-12.85012c-1.88856,0.5504 -3.88548,0.81012 -6.16792,0.81012c-13.2784,0 -24.08,-10.8016 -24.08,-24.08c0,-2.29104 0.26144,-4.29656 0.817,-6.192c-7.85868,-4.2742 -12.857,-12.48548 -12.857,-21.328c0,-9.00592 4.99488,-17.22236 12.85012,-21.35208c-0.5504,-1.88856 -0.81012,-3.88548 -0.81012,-6.16792c0,-13.2784 10.8016,-24.08 24.08,-24.08c2.29276,0 4.29656,0.26144 6.192,0.817c4.2742,-7.85868 12.4872,-12.857 21.328,-12.857c9.00592,0 17.22236,4.99488 21.35208,12.85012c1.88856,-0.5504 3.88548,-0.81012 6.16792,-0.81012c13.2784,0 24.08,10.8016 24.08,24.08c0,1.892 -0.28896,3.91816 -0.87892,6.1576c7.89308,4.2656 12.91892,12.49752 12.91892,21.3624c0,8.84252 -4.99832,17.0538 -12.857,21.328c0.55556,1.89544 0.817,3.90096 0.817,6.192c0,13.2784 -10.8016,24.08 -24.08,24.08c-1.892,0 -3.91644,-0.28896 -6.1576,-0.87892c-4.26732,7.89308 -12.49924,12.91892 -21.3624,12.91892zM65.53372,132.95772c0.6622,0 1.29,0.38356 1.57208,1.02168c3.30068,7.42352 10.71732,12.2206 18.8942,12.2206c8.01692,0 15.43872,-4.80912 18.90624,-12.24984c0.36292,-0.774 1.23496,-1.17304 2.06228,-0.91676c2.4768,0.7568 4.61992,1.1266 6.55148,1.1266c11.38124,0 20.64,-9.25876 20.64,-20.64c0,-2.494 -0.3354,-4.47888 -1.08876,-6.43796c-0.32336,-0.8428 0.0602,-1.79396 0.87892,-2.1758c7.44072,-3.46752 12.24984,-10.88932 12.24984,-18.90624c0,-8.01692 -4.80912,-15.43872 -12.24984,-18.90624c-0.77744,-0.3612 -1.1696,-1.24184 -0.91676,-2.06228c0.7568,-2.4768 1.1266,-4.61992 1.1266,-6.55148c0,-11.38124 -9.25876,-20.64 -20.64,-20.64c-2.494,0 -4.47888,0.3354 -6.43796,1.08876c-0.84452,0.32336 -1.81632,-0.0688 -2.18784,-0.90644c-3.30068,-7.42524 -10.7156,-12.22232 -18.8942,-12.22232c-8.01692,0 -15.43872,4.8074 -18.90624,12.24984c-0.38184,0.81872 -1.333,1.19884 -2.1758,0.87892c-1.95908,-0.75336 -3.94396,-1.08876 -6.43796,-1.08876c-11.38124,0 -20.64,9.25876 -20.64,20.64c0,2.494 0.3354,4.47888 1.08876,6.43796c0.32852,0.85484 -0.07052,1.81804 -0.90644,2.18784c-7.42524,3.30068 -12.22232,10.71732 -12.22232,18.8942c0,8.01692 4.8074,15.43872 12.24984,18.90624c0.82044,0.38184 1.204,1.33128 0.87892,2.1758c-0.75336,1.95908 -1.08876,3.94396 -1.08876,6.43796c0,11.38124 9.25876,20.64 20.64,20.64c2.494,0 4.47888,-0.3354 6.43796,-1.08876c0.20124,-0.0774 0.41108,-0.11352 0.61576,-0.11352z" fill="#1d257a"></path><path d="M81.7,105.78c-0.86,0 -1.72,-0.34228 -2.23772,-0.86l-20.64,-20.64c-1.37772,-1.20228 -1.54456,-3.44 -0.16856,-4.81772c1.20228,-1.37772 3.44,-1.54456 4.81084,-0.16856l18.23544,18.57084l30.27544,-30.78456c1.37084,-1.37772 3.60856,-1.20228 4.81084,0.17544c1.37772,1.37084 1.20916,3.60856 -0.16856,4.81084l-32.68,32.68c-0.51772,0.69144 -1.37772,1.03372 -2.23772,1.03372z" fill="#fefdef"></path><path d="M81.7,106.64c-1.03544,0 -2.06228,-0.34228 -2.92228,-1.20228l-20.64,-20.64c-0.86,-0.69144 -1.37772,-1.72 -1.37772,-2.92228c0,-1.20916 0.34228,-2.23772 1.03544,-3.09772c1.54456,-1.72 4.3,-1.89544 6.02,-0.34228l17.70912,17.88456l29.75772,-29.92456c0.86,-0.86 1.89544,-1.20916 3.09772,-1.20916c1.20228,0 2.23772,0.51772 2.92228,1.37772c0.86,0.86 1.20228,1.89544 1.20228,3.09772c0,1.20228 -0.51084,2.23772 -1.37084,2.92228l-32.68,32.68c-0.516,1.03372 -1.71828,1.376 -2.75372,1.376zM61.06,79.12c-0.68456,0 -1.37772,0.34228 -1.89544,0.86c-0.50912,0.51772 -0.68456,1.20228 -0.68456,1.89544c0,0.68456 0.34228,1.37084 0.86,1.72l20.64,20.64c0.86,0.86 2.58,0.86 3.44,0l32.68,-32.68c0.51772,-0.51772 0.86,-1.20916 0.86,-1.89544c0,-0.68628 -0.17544,-1.37772 -0.68456,-1.89544c-0.51772,-0.51084 -1.03544,-0.86 -1.72,-0.86c-0.69144,0 -1.37772,0.17544 -1.89544,0.69144l-30.44228,30.61944c-0.17544,0.16856 -0.34228,0.16856 -0.69144,0.16856c-0.16856,0 -0.51084,-0.16856 -0.68456,-0.16856l-18.06172,-18.41088c-0.51772,-0.50912 -1.03544,-0.68456 -1.72,-0.68456z" fill="#1d257a"></path></g></g></svg>
                    </div>
                    @endif
                    <a href="{{ route('detail-shop', $shop->slug) }}"><img src="{{ Storage::url($shop->banner_image) }}" alt=""></a>
                </div>
                <div class="shops_page__grid_item__title_block">
                    <a href="{{ route('detail-shop', $shop->slug) }}">{{ $shop->title }}</a>
                </div>
                <div class="shops_page__grid_item__review_block">
                    <div class="shops_page__grid_item__review_block__rating">
                        <div class="rating rating_set">
                            <div class="rating__body">
                                <div class="rating__active"></div>
                                <div class="rating__items">
                                    <input type="radio" name="rating" class="rating__item" value=1 required>
                                    <input type="radio" name="rating" class="rating__item" value=2 required>
                                    <input type="radio" name="rating" class="rating__item" value=3 required>
                                    <input type="radio" name="rating" class="rating__item" value=4 required>
                                    <input type="radio" name="rating" class="rating__item" value=5 required>
                                    {{-- <div class="rating__value">{{ round($shop->reviews()->avg('rating'), 1) }}</div> --}}
                                    <div class="rating__value">{{ round($shop->rating, 1) }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="shops_page__grid_item__review_block__reviews">
                        <a href="{{ route('detail-shop', $shop->slug) }}#reviews">Total recenzii: <b>{{ count($shop->reviews) + $shop->products()->withCount('rewiews')->count() }}</b></a>
                    </div>
                </div>
                <div class="shops_page__grid_item__review_block__add_review_block">
                    <a class="shops_page__grid_item__review_block__add_review" href="{{ route('detail-shop', $shop->slug) }}#add-review">Lăsați feedback</a>
                </div>
                <div class="shops_page__grid_item__links">
                    <a href="{{ route('detail-shop', $shop->slug) }}">În pagina magazinului</a>
                </div>
            </div>
        @endforeach

    </div>

    <!-- Пагинация -->
    <div class="shop_page__paginate">
        {{ $shops->links('pagination.paginate') }}
    </div>
    <!-- Пагинация -->

    <!-- Recently products -->
    @include('products_card.recently_products')
    <!-- Recently products -->

</div>

@endsection
